- hostPath Demo for hostPath volume type (Directory and DirectoryOrCreate) - Doc

**HostPath: Demo for hostPath volume type (Directory and DirectoryOrCreate)** 

Demo of `HostPath` VolumeType. Will take the same PodTemplate what we used before for `emptyDir`.

One writing data, one serving data and such. Nothing much to change but the `volume` parameter.

```yaml
apiVersion: v1 #apiVersion of the Pod
kind: Pod #Kind of the Object
metadata: #Metadata of the Pod (name, labels as key-value pairs)
  name: pod-hostpath
  labels:
    app: nginx
    env: dev
    release: v1.0
  
spec: #Spec of the Pod
  containers: #Containers under the Pod
  - name: write-app
    image: alpine:latest
    command: ["/bin/sh"]
    args: ["-c", "while true; do date >> /var/log/index.html; sleep 10; done"] #Command that writes the data to the emptyDir() PodVolume
    volumeMounts: #VolumeMounts of the Container to    the emptyDir() PodVolume.
    - name: standalone-pod-volume
      mountPath: /var/log #workDir of the Container mounted to the emptyDir() PodVolume

  - name: serve-app
    image: nginx:latest
    ports:
    - containerPort: 80 #Port of the Container
    volumeMounts:
      - name: pod-hostpath-volume
        mountPath: /usr/share/nginx/html
        #workDir of the Container mounted to the emptyDir() PodVolume, serving the data from the emptyDir() PodVolume

  volumes:
  - name: pod-hostpath-volume #Name of the emptyDir() PodVolume
    hostPath:
      path: /var/tmp #hostpath -> PodVolumeType
```

Here,
```yaml
volumes:
  - name: hostpath-volume
    hostpath:
    path: /var/tmp/nginx-data
```


There are multiple types of `hostpath`, will get to each one.

##### 1) **DirectoryOrCreate**
Either mount to a directory or if no directory, create one and get mounted. 

```
volumes:
  - name: hostpath-volume
    hostpath:
    path: /var/tmp/nginx-data
    type: DirectoryOrCreate
```

```
kubectl create -f /path/to/hostpath.yaml
kubectl get po -o wide
```

HOW TO VERIFY IF THIS WORKED?
```
curl PodIP
```

HERE, THE DATA WAS GETTING SERVED via `emptyDir` but now, either `DirectoryOrCreate` and getting out of that!.

VERIFY IT IN THE NODE ITSELF. 
```
ssh username@NodeVMIp
ls -l /var/tmp/
```
There you have it. Probably the `nginx-data` would've not been there but if not i would've created and mounted it. (with the permission of 755). 

```
ls -l /var/tmp/nginx.data
cat file 
```

Here, if it is `emptyDir`, the volume would be lost if gets deleted or recreated. With `hostpath`, the content will not be lost tho. So, the folder will not get deleted, unless you manually do it. 

Will check if it true or false.

```
kubectl get po 
kubectl delete po PodName
```
```
ssh username@NodeVMIp
ls -l /var/tmp/nginx-data
cat file 
```
Data will still be there. Till it was served and alive. WHICH THE DATA CAN BE RESPAWNED AND WORK IF GETS PRESENTED ON THE SAME NODE. 

```
kubectl create -f /path/to/hostpath.yaml
kubectl get po -o wide
```
```
curl PodIP
```
+
```
ssh username@NodeVMIp
ls -l /var/tmp/nginx-data
cat file 
```
Unscathed!!!. Which it was used to be. Data will be generated and gets spinned up since where it left. 
> Even though the POD got deleted, the leftover data will still be available.

Sample manifest:
```yaml
apiVersion: v1 #apiVersion of the Pod
kind: Pod #Kind of the Object
metadata: #Metadata of the Pod (name, labels as key-value pairs)
name: pod-hostpathDirOrCreate
labels:
app: nginx
env: dev
release: v1.0

spec: #Spec of the Pod
containers: #Containers under the Pod
- name: write-app
image: alpine:latest
command: ["/bin/sh"]
args: ["-c", "while true; do date >> /var/log/index.html; sleep 10; done"] #Command that writes the data to the emptyDir() PodVolume
volumeMounts: #VolumeMounts of the Container to the emptyDir() PodVolume.
- name: pod-hostpathDirOrCreate-volume
mountPath: /var/log #workDir of the Container mounted to the emptyDir() PodVolume

- name: serve-app
image: nginx:latest
ports:
- containerPort: 80 #Port of the Container
volumeMounts:
- name: pod-hostpathDirOrCreate-volume
mountPath: /usr/share/nginx/html
#workDir of the Container mounted to the emptyDir() PodVolume, serving the data from the emptyDir() PodVolume
  
volumes:
- name: pod-hostpathDirOrCreate-volume #Name of the emptyDir() PodVolume
hostPath:
path: /var/tmp/nginx-data #hostpath -> PodVolumeType
type: DirectoryOrCreate #PodVolumeType
#also can simply use `Directory` as value. if directory exists, will be used, if not, fails.
```



---

