Here we cover an introduction to containers, Docker, the architecture, various concepts and terminologies, installation, hands-on examples and more!

Code & Notes: [https://github.com/kunal-kushwaha/Dev...](https://www.youtube.com/redirect?event=video_description&redir_token=QUFFLqbVdSMkdPdWVXUWNDQmFQcHFzQXdTdHVDTXd2d3xBQ3Jtc0trcmMyLURWcmRfSFJ4djdJMGNXNnVvaFRNaDNndE55dW1VNGJRNU5qd0ZsOXBPTm12Q3JHNjQ1WGpTSjd6dmhNcjNQd2s2OTl2YjdsTU5BRGhpZ0lNdDBWQ0w4WEZsV0tqdVc4NUo1Uk4yR1Uyckxtcw&q=https%3A%2F%2Fgithub.com%2Fkunal-kushwaha%2FDevOps-Bootcamp&v=17Bl31rlnRM)

========================================= 
Timestamps:.
[0:00](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=0s) Introduction
[2:19](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=139s) Before Docker
[10:16](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=616s) Containers
[12:04](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=724s) Containers vs Virtual Machines
[16:16](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=976s) History of Docker
[17:47](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=1067s) Running Docker on Windows
[20:00](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=1200s) Running Docker on MacOS
[20:40](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=1240s) Running Docker on Linux 
[21:04](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=1264s) What is Docker
[21:54](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=1314s) Installation 
[24:33](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=1473s) Getting started
[25:35](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=1535s) Docker Runtime
[28:48](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=1728s) Docker Engine
[30:45](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=1845s) Orchestration
[32:06](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=1926s) Docker / Container Image
[35:27](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=2127s) Difference b/w Dockerfile and Image
[36:38](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=2198s) Open Container Initiative (OCI)
[39:53](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=2393s) Docker Desktop
[41:31](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=2491s) What is DevOps
[44:58](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=2698s) Docker CLI
[45:36](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=2736s) How the CLI works 
[50:55](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=3055s) How a Docker Image works
[52:22](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=3142s) Downloading Docker Image
[54:54](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=3294s) Some additional Docker commands
[1:05:50](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=3950s) Accessing a container locally
[1:10:42](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=4242s) Docker commit
[1:15:25](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=4525s) Removing Docker Images
[1:17:00](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=4620s) Layers
[1:21:19](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=4879s) How to create Docker image
[1:31:45](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=5505s) Architecture of Docker Engine
[1:41:20](https://www.youtube.com/watch?v=17Bl31rlnRM&list=PL9gnSGHSqcnoqBXdMwUTRod4Gi3eac2Ak&index=6&t=6080s) Outro

##### Introduction
it's an introduction to docker but it's not  the basics . we'll do a deep dive 

- we'll see what docker is all about 
- why we are using it 
- how did it come into existence 
- what all the problems the docker is solving 
- we'll do a little bit of  exploration of the docker concepts
- we'll try to see what the installation is going to be  on windows linux and mac and 
- we'll see  obviously hands-on examples
- we'll see how you can use docker in your daily life 
- we'll see how you can utilize docker as a developer and also 
- where it lies in the devops scenario 

so will learn about how  containers are working and lots of command line tools and more.
##### ~~Before Docker~~
~~let's talk about the past before docker what used to happen so there are so many enterprises and companies   t're running their own applications for example . and if the applications go down your  company will offer significant amount of  loss.~~

~~where are these applications running you may wonder  servers you may have heard about servers there was   data centers that companies have t run their own some companies on their own servers some borrow servers from big providers  and other  cloud providers and more so the idea is that these applications are running on these servers~~

~~and what used to happen initially when the  companies were  starting out with applications and more computers  came into existence initially very very first time applications were running on server what used to happen was that only one application will run on a server one application on one server this is a very old story  initially how it used to happen you have a  rver over here you want to run an application your application is running in this  rver  200 people are using your application now example: 2000 people start using your application obviously the load will increase on this server what do you want you more you want more and more servers running your application so before that  when t were learning running  windows and more and  linux and all these other things t didn't really have a way to run multiple applications on a server  so for example if you want to increase the applications running you would have to add a new class add a new server basically  buy a new server if you want new applications  i will buy  other server hard disk and all it contains cpu or whatever i will add my application on it  this  so every time you want a new application you have to buy server this was the world we used to live in this is not cool both in terms of   environment you need more and more hardware running and cost as well imagine your company wants to start a new app an instance of another app or  a new version of app or whatever you have to add a new new box in your server room or whatever .~~

~~who solves this problem vmware vmware is a company. vmware solved this problem how virtual machines we all know what virtual machines are even if you don't know what virtual machines are you may have heard about virtual machines . dual booting and more  that you may have heard about it but if you don't know what virtual machines are let's cover that that's fine but what   virtual machine doing remember this thing when i talked about one  application on one server virtual machine solve this problem solves this problem simple in simple terms you can run multiple applications on the same server  but there was a problem with this also what was the problem you may have heard about it when you or you may have used about it the biggest problem here is that virtual machines require their own operating system~~

 ~~so for example operating systems use  your cpu and your ram and some dedicated amount of hard disk or whatever . so it may not be always that  all the things that are allocated to this operating system there this part of os t are being utilized or whatever  there comes issues with  licenses operating of operating systems and more as well~~

 ~~so even though it was better far far better than  one application on one server it was still not perfect  you need to have a new operating system if you want to use  virtual machine  . now if you try to dual boot your computer you have to install a new operating system it's a windows on one end of your hard disk and a linux distro  ubuntu or something on other part of your hard disk it's going to take some time gonna take some time~~
~~so this were  the flaws of virtual machines not super fast you need a dedicated operating system which in turn leads to  dedicated  storage dedicated  your own softwares and cpu allocation and ram a location   this operating system is allocated this much amount of cpu this much amount of ram or whatever  better than before but still not perfect what are a few more problems. this is the very past past scenario~~ 

~~let's look at some newer problems that you may have encountered if you're a developer  for example you build an application  you made a nice little website and all and you give that website to your friend   this is all the source code and all  please try to run this and give me feedback on your own system your friend is also a developer  because that's what we do we developers we build more of systems/things and we share with each other  so your friend is  oh it's not running on my machine it's saying this version is missing it's saying this module is missing it's saying that this version is  deprecated or some newer version you are using and you are you my friend are using some other version i am using some other version it is not working for me and then you say the most  popular line it works on my machine that's what you tell your friend . it's watching working on my machine what do you mean it's not working on your machine  so such issues with  having various dependencies  modules packages and   this it works on my machine more of systems/things this is what  that  docker is trying to also solve so forget about docker . now we're  comparing  the problem so one of the problems were   the virtual machines problem you need a operating system other problem is~~ 
~~your dependency management and the problem is~~ 

 ~~it works on my machine it doesn't work on your machine~~

~~and  if you want to  shift your code from one particular point to another particular point that also that migration may also be some time consing one more thing is you're contributing to open source and you want to set up the project on your local system that can be a very tedious task . so come now open source organizations t have used docker using docker you can  set up the project  this how we'll talk about later forget about docker . now   so these are all the problems  these are all the problems~~

~~now let's look at the solution  so comes into picture we'll talk about docker later let's talk about how t're solving this virtual machine problem  what happens with virtual machines is  i mentioned you are using a new dedicated operating system and ram and resources everything it conses~~ 

 ~~companies started thing   wouldn't it be cool if we had this isolation . our applications are running in isolated environments but i don't want to install a new operating system for example so what i mean by isolation is that you have dual booted your computer  on one ha one part of your hard disk you have windows installed another part of the hard disk you have ubuntu installed now what's going on in ubuntu  windows has no idea what's going on in ubuntu, ubuntu has no idea what's going on in~~

~~windows you can create so many virtual machines  that . but the problem is that every virtual machine will require its own dedicated~~

~~operating system and hardware and resources~~
>~~USUAL HISTORY OF THE TRADITIONAL , VM AND CONTAINER.~~
##### ~~Containers~~
~~and all people started thinking wouldn't be possible if we had~~ 
~~something that would not require us to have a dedicated amount of hardware allocated or whatever and  operating system installed everything and we can  use the one that is provided to us  so if you're using ubuntu then i want to create these different different applications so vm virtual virtual machines you can run many applications in different  virtual machines wouldn't it be cool if you can run all these different different instances of your  your applications  on the same machine same operating system not  virtual machine  dividing operating  installing a new operating system no the one operating system only run your applications on that hundred or ten thousand whatever how many applications you want to run this problem is being solved by containers~~
##### ~~Containers vs Virtual Machines~~
##### ~~History of Docker~~

##### ~~Running Docker on Windows~~
##### ~~Running Docker on MacOS~~
##### ~~Running Docker on Linux~~ 
 --- as   up to this -- 


##### What is Docker
Docker is a container platform that allows you to build, test and deploy applications. 
##### Installation 
 --- as  the installation -- 
##### Getting started
now let's talk about docker, how docker works and what docker contains and all.

docker is basically helping us to run our applications in isolated environments. our application will run in a container using containers and
this container itself is known as an isolated environment 

means container will not know what's happening outside it or whatever even in the operating system  

so that way you can run so many containers, it provides security and so many other things. but this is one basic information about docker that i wanted to share. Runtime and Engine.

DOCKER UNDER THE HOOD ARCHITECTURE:
##### Docker Runtime
![[D1 1.png]]
the runtime. we have a runtime+ docker engine top of it. there was a docker engine + that it comes with shipped - orchestration

what is the use of the runtime?
runtime allows us to start and stop containers

so all the things you need to make and all and basically allows us
to start the container stop the container. the run time is off  two type,.

1) one is the **low level run time - namely runc**
-- the the role of this runtime is basically  to work with the operating system + starts and stops the containers

2) **containerd**
-- is a cncf project. containerd -  sort of lies on the higher level of the hierarchy and the role of containerd is basically managing runC
+
it also it also helps in managing containers but it's it does more of systems/things 
1) how to interact with your container 
2) with the network 
3)  the internet for example
4) how to get data from the internet into the network which is also known as 
5) pulling the images 
all these things happen with containerd. every docker container will have runC + containerd

containerd also manages the runC. so runc is using to start and stop continuity does all the other things  getting data, connecting with the network outside world or all these other things 

it's also used in the kubernetes runtime.
docker containers - containerd is also container runtime for kubernetes
##### Docker Engine
the next thing is this docker engine part. 

docker engine -> Docker Daemon as a server
![[D2.png]]
your docker daemon  server is running.
the docker daemon ->  the server that runs inside it, like a program with the provided api by which you can communicate docker.

create this container,  delete this container so you can communicate via the docker cli

 docker cli using a rest api, you can make an api call to the daemon and it will work with the container runtime and do it via the docker cli 
 
 write docker command 
 ```Docker
 docker run ubuntu
```

cli be like:  the daemon will be container runtime is saying
`please run  ubuntu in a container'

it's gonna be like, yeah sure no worries. uses a client server architecture.

you can see that this is the client, this is a server = client server architecture

docker daemon will be listening to the api requests and manages all the docker objects and more 

the docker client is basically what you use to interact with it and we can 
either use a cli you can also use graphical interfaces and all these other modes.

AS WE SAW IN THE DIAGRAM,
>DOCKER CLI -> CLIENT
>DAEMON -> SERVER
##### Orchestration
what do we mean by orchestration l, 
example: your application is running in 10 000 containers  and you want to scale it up 
or example: you want to scale it to 20 000 containers.  few containers on that got ruined 500 containers, you want to restart those containers

possible that your docker is available.  this is docker server running and over here you have many many containers running
-> all have version one of application. v1.0
-> you want all of these to be version two. v2.0

what do you do to stop the entire application and then update it? or you
update it once by once? i want to make ruling updates and all these other things. 

this is very time consing if we do it manually so many monitoring and
everything will be required :(

wouldn't it be cool if all these things happen automatically on its own. will do that with the help of
-> orchestration engines

 there's docker swarm built-in and folks use kubernetes. 
 
 kubernetes is much more than an orchestration engine  but it's one of the functionalities.
 >so in simple terms it allows us to manage containers.
##### Docker / Container Image
these two things and then i'll do a deep dive later then.

 containers. containers are running  your applications inside it.

e.g.: ANALOGY:
example: you have a dish,  you are eating a cup bowl of noodles that has that has like vegetables in it and as well and your friend lives in bangalore named sam.  you're bangalore.

i'm like living in new delhi. different different cities and  states
so i'm like 
- hey sam this noodle soup is amazing would you like to try it. 
- someone's like yeah sure but i'm like  you are in bangalore though how can i give you my noodle soup 
- here take my noodle soup i'll ship it in a box take your noodle soup 
-does that make sense? n.o 
because by the time the noodle soup will reach sam. it will be like very bad . and also it's it doesn't make sense to share the running application to my friend.

 instead what we can do is to share instructions or i can share the recipe. i'm like hey here's the recipe make it yourself and then you can also enjoy it
---
Similarly when you're running an application 
- dude check out this great website i'm running 
- oh how can i do that 
- here is the entire instruction with the source code and everything run it and you can do it  
-so this instruction part when you're following a recipe, this particular thing we  call it like that you follow an instruction and you follow the recipe and the dish will be created. so the dish is the actual application that is running in the servers inside where containers without any problem but what leads us to creating that dish that is known as a docker image or a container image

so if i want someone to run my application i can just create an image of my application and share that image and then when they run their image that i have shared with them, the application will start so image is what it's just a file that contains all the instructions and everything.

 and container is a running instance of an image, you can also create docker images using something called dockerfiles.

dockerfile is your recipe. example:, node.js run this command copy these files run this command expose this Port. so on and so forth.

![[D3.png]]
dockerfile: you run this you will get an image. you run the image you will get your container.  

 when you have your own application. that you want to containerize you have to write a docker file for that and it will be converted to an image that image. you can share to other people.
##### Difference b/w Dockerfile and Image

please don't be confused between dockerfile and image.

image is basically just something that has been created from a docker file

let me give you an amazing example for this, image is a template. 
in a programmer's POV. **IMAGE** can be represented as a class and **CONTAINER** is an object. Hope this makes sense!

What's dockerfile then?
Dockerfile is something that i can use to create a class. this container will have many dependencies and all these other things and files and OS and all these other things.

how do we know what things are available? - it's all mentioned in the image. you create the image using a docker file. 
Dockerfile contains a list of instructions.  

will clear when we do the when we do the hands-on of this.
##### Open Container Initiative (OCI)
 but important point i want to mention over here.
 so what is happening. since, there are many many container run times as you can see over here such as 
 - container runtime, 
 - containerd, 
 - runC, 
 - lxc (linux containers), 
 - rocket rkt(redhat runtime named rocket). 
 - CRI-O
 -so there's so many container runtimes.

which one should i use? should i use containerd? should i use rkt?
and
if i'm using containerd, does it mean that i cannot use rkt? or what is
happening over here. 

folks were like  this is not going to work they came up with this solution known as **open container initiative** standards. OCI. opencontainers.org

it's a project under the linux foundation. open container initiative you can check out a blog named docker and OCR Runtimes.

so many container runtimes were coming into the market that the open container initiative were like they started two things, they started a 
- runtime specification and 
- image specification

what images are? they provided some like sort of like basic rules and more that they have to follow same for the runtime specification

 In a blog named, Don't Panic: Kubernetes and Docker -  mentioned that docker as an underlying runtime is being deprecated in favor of runtimes that will use **container runtime interface (CRI) for kubernetes**.

so kubernetes using the container runtime interface you can basically change all the like container runtimes that a plug-in that inter that enables  in the kubernetes to use a lot of like variety of container runtimes  

what happened was they were like hey we are not going to deprecate docker for Not meeting the CRI OCI standards. NO PROBLEM,.

people freaked out. there's no reason to do that because as you can see over here that i mentioned docker meets OCI standards.  docker complies with this OCI ..  a docker specific image it will comply with this

but here it mentions that any OCI compliant image regardless of the tool you use to build it will look the same to kubernetes. so both containerd and CRI-O know how to pull these images and run them.

what is the difference between a container runtime and docker? it's a part of docker the entire architecture. 

OCI just sort of like rules that they have provided. that it's a basic specifications they have mentioned. On top of that, you can modify it like accordingly and make yourself stand out or whatever. 
##### Docker Desktop
Docker Desktop: see all the images i mentioned over here. 
it's a node to do application that i created and i created an image out of it 

if i share this image with you it will be of 800 mbs and you can run this image on your docker desktop. it will be running the application that i created .

there are some of the popular tools that are already available over there. so for those tools images are already available online in docker. remote registries online so in the clouds - docker hub or private registries as well.

if you want so that's known as docker registry.

example: i want to run ubuntu gonna just say
```
dpocker run -it uuntu
```

now ubuntu is running  on the right hand side mac is running left hand side ubuntu is running you want to see all the running containers,
```
docker ps
```

you can see ubuntu started 12 seconds ago. how cool is that? in just a few seconds. i was able to create it. make sense?

this is a demo i wanted to show you. will deep dive. will explain the theory part and then we'll cover the rest of the more of systems/things.

##### What is DevOps

let's see, this is the picture,. what is devops?
![[D4.png]]
so this is sort of like the cycle of devops.

Devops is is a set of practices, two words dev + ops like development and operations.

you make somethin -  build your website and more and 
the operations part is what you deploy it,  you maintain it,  
You are like - my application is now running 
- i'm also operating it 
- i'm monitoring it
- i'm seeing if something is going . or
- wrong updating it and so on and so forth

 example: 
- you plan
- then you code it out . in the development then 
- you build it and then
- you test it then 
- you release it and then
- you deploy it using the deployment you deployed  it

example: on cloud, for that you use more of systems/things like 
docker to containerize things,
operate on it kubernetes,
ansible for automating build jobs,
grafana or whatever using it to monitor by dashboards 

then you again 
plan it again
code again over newer versions 
versions keep coming keep coming keep coming 

 **let's talk a little bit more about what docker does** 
 
 so when we're talking about this devops, things over here doing two things

one is example: 
1) you made your own application then you create what 
2) you want to create a container out of it so
3) you want to create a docker file for that. you write the docker file and then
4) your own like you create an image for it then 
5) you make a container of it and so on and so forth 

 ops you can do something like you download an image. don't care about  what's inside like, how it was made or whatever but like 
 you're downloading the image 
 running the image
 operating on it, all these other things but
writing the docker file and more, 
all these things have to create the image because 
you are developing that particular application

so you create the image - created using the docker file and 

-- this is why containers are great, if you're not using containers the operations team needs to handle all the  hosting and deployment and all these other things that your application requires 

but since you're using containers you can use whatever you want whatever prefer, 
e.g: you can use node.js, python, machine learning like whatever you want
  and
as long as you are creating images out of it, 
you can sort of like then deploy deploy deploy

the ops part is not releasing the 
ops team is not seeing how you are creating that image 
they are only seeing the final image

THIS HOW OPS SYNCS IN WITH THE TEAMS.

 >e learnt about 
 >1) runtime
 >2) engine
 >3) daemon
 >IN docker,
 >1)  dockerfile 
 >2) Image and
 >3) container
##### Docker CLI
 let's move forward , Working all the same with CLI a.k.a Terminal:

we go to our terminal and we just writev 
```
docker run hello-world
```
see what happens.  it'll 
- unable to find image hello- world locally, so it will
- pull it from library hello-world
that's it. now it's saying hello from docker this message 

shows that your installation appears to be working!

so many things happened happened in a matter of seconds. let's see how it works.
##### How the CLI works with Docker REST API's to be interactive

so we just entered ->  docker run hello- world

we are saying the command we are running is 
-> docker run hello-world

what does it mean docker means docke. it's a docker cli. this thing we are working with the docker cli.  the client it's going to the server to docker server, saying hey -> run hello world . 

what is run? - run basically means, you run an image to create a container. you run an image to create a container. 

what this is image name? when i first ran docker run hello-world, it will be like hey you don't have hello world image on your local computer now,
so i am going to download it.

from where is it downloading?  - docker registry

from here, from online - docker hub, hub.docker.com. then it's downloading it, pulling that from registry and running it locally. 

image has downloaded. then it runs that image and

now that image is running and that's it. similarly, i can say
```
docker run imageName
```

in the interactive environment ubuntu. -it. it will run it very fast.  why?
because now you can see it did not show me the message.  why? 
because ubuntu image is already downloaded on my local machine.

you can see all the images. you can say
```
docker image ls
```
these are all the images that are downloaded on my local machine. as you can see hello world is the one that i just downloaded.

ubuntu.  these are already downloaded. hence when you run it for the very first time, it is not present on your system it will take some amount of time to download it but when you run it again 

if i am running it again like this then it's running it very fast.

will see more about this particular line. if you run docker run hello-world again, didnt say - can't find it in the local system. cause, it is available in the local system.

now so what happened is when docker runcommand for example: it's going to be like -  

hey is hello world it's going to talk your client, the daemon. 
The daemon is going to be like -  hey do i have the hello-world in my local system,  if yes RUNA IT. 
If no, then it's going to go to the registry docker hub registry. 

it is a image library people are sharing their images over here. all the popular popular tools like mongodb and more or their images you can find over here.

so  i don't have it on my local system i will download the image from internet. 
example: hello world image. this is the one hello world image.

so i download it from here and then 
it downloads on my local system then it
runs that image and 
it forms a container, what does it do inside the container 
it just says hello world 
it does it said hello world and then it stopped the container. 

so here we talked about the registry part. registry is very simple it's the online
repository many cloud providers have their own container registry. so all the
images you can find over here. you want to find the image for flask you want to find flask so this is great when you're doing like hackathons and more as well. 

you want to example:  run mysql or you want to run mongodb on your machine but you don't want to install it. Just spin up a container like that

docker run WHATEVER, that's it!. 

CONTAINERS:
 -- container is running inside my docker
 1) docker is a tool so it's
 2) basically communicating with my own OS
 3) but it's isolated
 4) hello world running inside container
 5) ubuntu that i just run inside the container 
 6) it has no idea what's going outside the container
-> that's basically what containers are isolated environments in which you can
run your applications.

##### How a Docker Image works

there are a few things about it like the hash values and layers and more of systems/things. 

image id and the tag what is this? + how is it running? what is inside this docker image?  

Example: you're running a flask application, run mongodb in a docker container

so we know that when we are running applications in a computer. we need
operating systems for that, you're running mongodb you need OS to run whatever that you are about to run.

An image also contains of OS files + The programs Libraries, Dependencies and more.

OS + Program files -> Image -. Container.
##### Downloading Docker Image
++you can directly download the images as well. 

just,
```
docker pull WhateverAppOrProgram
```

now that will download from registry + you can specify the versions of it +  isolating multiple environments separately + assess shell + vizualize processes. and more. work around with the same and done!

It'll be lightweight, portable, efficient and more You can see the tags of it, versions of it, size of it and more

 this is a  like a terminal more of systems/things that i have inside the container. container itself has its own operating system in this case
##### Some additional Docker commands

Some additional docker and linux commands for future reference.

ps aux -> shows Processes (Works both on containers and Linux) 

these are the processes and more that you can see over here.
one has no idea about 2nd's Processes.  each of those container and its shell are isolated.   
let's move forward  and similarly. 

**Docker Container ls**
you can also do 
```
docker container ls //to list
```
 this will also show you all the containers . 
 ++
 Also you can refer each of the container and Work with them with the help of  **ContainerID**.

REFER ID's instead of names and works without any hassle.
 
++
Separate sessions are possible working with multi shell in only one container.

++
```
docker exec -it containerid bash
//$SHELL
//to execute/assess container
```

both of these sessions are in the same + both the shells are attached to the
same container. 

so the command that i mentioned after the exec ID + **bash** one basically means the bash shell should be attached to this container this running container.  so that you can go inside the container and do all the things you want to do.

because these images and more have their own operating system and  you can runcommands in that . 
++
**to stop image/containers**
```
docker image/container stop ID
```

++
**to remove image/container**
```
docker image/container RM ID
```

++
**to get information about the image/container**
```
docker image/container inspect ID
```
it's giving me all the information about

- this container 
- the image
- state of the container
- path
- id of the container 
- when it was created
- it's currently running .
- process id 
- network information 

**to get logs of the container**
```
docker logs ID
```

**to delete unused/stopped containers**
```
docker prune -f
```

One more thing that,
I've been using and running a container for a really long time. ec: 
```
docker run alpine ping URL
```
 
FLAGS:
-d -> detach from current shell and run in background.
--since -> 5s (or any duretion, refer help) ID
-f -> force
-q -> gives only the ID's of it.

Object Identification -> refer first four letters of the ID. 
AND WORK THE THE COMMANDS WITH THAT. 
##### Accessing a container locally
--- USUAL PRACTICE RUNNING + PORT FORWARDING -p + -d and making it readily available. ---

##### Docker commit
you want to share your container and you made some changes in your container and you want to share that with someone 

and you want that particular change to be visible in that image. + SIMPLY SAVING CHANGES ON THAT IMAGE IF I RUN THE IMAGE and Containerizing it back.

CAN USE, Docker commit.

```
docker run -it ID 
```

-> CREATE FILES THAT YOU'D LIKE TO ADD + MAKING CHANGES AND ALL.

now your image is in a changed state that You'd like to save it. SIMPLY JUST PACKAGE IT!. To do that,

for experimantation, you can exit, start and exec to chack the changes either persist. 
-> To have a replication of the changed image, 

```
docker commit -m "message" ID (--name) newImageName:VTag 
```

-> docker ps or Image ls
->  CHANGED REPLICATED IMAGE GOT PACKAGED.

##### Removing Docker Images
```
docker image -q
```
shows all the image exists in the docker.

to remove all the image existing all at once. do 
```
docker rm $(docker image -q) -f
```
##### Layers
>VVV IMPORTANT ++ONE TIP

what are layers? 
layers that run when i pull or run an image?
THOSE ARE **LAYERS**. Will see that in brief.

> ==LAYERS: images are built in layers every image (is an immutable file but is a collection of files and directories so ubuntu image itself is a collection of four images not images four files why because why this is an important point very simple point there may be a possibility==
> 
> ==because since everything is  based on linux kernel there may be a  possibility that if you're downloading some other imagE.== 
> ==example: mongodb or something it may use some files==
> ==that are also being used by ubuntu and since you downloaded the ubuntu==
> ==image does it make sense to download those files for some other images also==
> 
> ==example: there is a file a and that file a is being used in the ubuntu image also and example: mongodb image, also when you download the ubuntu image for the first time it will download all the files and file  a, b or whatever that is required when you download mongodb that is using the same file a and that is already on your local system because you downloaded ubuntu==
> 
> ==does it make sense to download that file a again no because it was already downloaded using ubuntu so some files may be there that are being shared by many images hence==
> 
> ==images are built in layers so every layer has a hash value like this  so whenever you're downloading see id calculate via the sha-256 hash value and if the layer contains a content is like if i say== 
> 
> ==docker images like and copy this it will only give me the hash value like that==
 
to check and inspect that , youll end up finding that it share the same SHA256 value that gets parsed here to craft the image.

so that it doesnt have to pull it again. Which makes it faster + also it saves cache running all the layers. 

you can check that by 
```
docker run image //to run image
docker image -q --no-trunc
docker images

//check does that sync the SHA256
```
```
//ALSO
docker inspect ID


//shows the layers that it contains
```

> ==when you down some download some more images, some other images. it will check is there a particular image that is common of it==
> 
> ==is then it will not download that image that is why it's extremely important & this is what makes it fast==
> 
> ==so if there is a particular layer of the image that is already downloaded on your system it will not download it again==
##### How to create Docker image
WORKING WITH DOCKERFILES,

how to create our own images. 

Dockerfile:
FROM -> is the tag means, what is the base image 
MAINTAINER -> maintainerConfig for reference/documentation purpose
WORKDIR -> root/ home folder to run all the execution
RUN -> run this command and pass it to run other command, recursive
CMD -> final execution command -> PID1
//will continue furthermore

EG: 
```Dockerfile
FROM ubuntu:lts(V)
WORKDIR /home/ubuntu/
MAINTAINER rithishsamm <rithish@hexrfactory.com>
RUN apt-get update && upgrade -y
CMD ["echo" , "Message"]
```

to make a image out of a dockerfile, 
```
docker build --tag imageName:v ./dirThatDockerfileLiesAt
```
 add .dockerignore in that directory
 
 Building an image and shipping it,
 ```
 docker login
```
 
create repo -> docker push Imagename
##### Architecture of Docker Engine
 let's see how it works in action .  architecture of docker and more. 
  so the docker engine that we are currently talking about . 
+open container initiative that there are many other run times i also talked about the open container initiative having two specifications like image spec and container runtime spec . things i talked about already so it sort of defines like  you can anyone can have their own runtime now but they have to follow the rules that have been mentioned by open container initiative about images and container and time specs .

**Let's see what the architecture look like so** 
{
docker client (api + cli)
|
docker daemon (server)
|
containerd (is a runtime manages runC runtime)
|

| shim       | shim       | shim       | -> deprecated                              |
| ---------- | ---------- | ---------- | ------------------------------------------ |
| runc       | runc       | runc       | -> runtime that start and stops Containers |
| CONTAINER1 | CONTAINER2 | CONTAINER3 |                                            |
}= DOCKER ENGINE

1) we have the docker client 
2) client communicates with the docker daemon  
3) the docker daemon communicates with your 
4) containerd, a supervisor starting container stopping containers. If you're making some containers there's this thing known as 
5) shim and then comes 
6) runc starts and stops container it's also a runtime it's being managed by containerd -> 
7) our containers being created
8) my container is created 
=> = this is known as a docker engine

this is my docker engine.

**HISTORY**: previously what happened was there was no like like there was only like docker client and daemon and some limit linux  specific files and that did not work out really well because like it was something known as lxc.

And it was not like good for scaling + monolithic architecture and with the open container initiative that they need to do it a little bit better. Open container initiative have stated some rules for us and we have to work with that.

so then came into picture like they added like containerd and runc and all these other things. 

>**CONTAINERD**: ***on the higher level*** we have containerd that also **manages  the runc** + **it works with the network** that pushing and pulling images. containerd helps us in that
>
>a special project is being used in Kubernetes too. a CNCF project and one of the reasons for this like first it was like for nitty gritty more of systems/things but now it's like also being used in kubernetes.

>**runc**:  is basically a runtime and it **allows us to start and stop containers** and **works on the lower level** 
container is a project by learning by this it's in the c

WHAT HAPPENS WHEN WE RUN DOCKER RUN COMMAND?

 -> docker run ubuntu or whatever 
 |
  docker client -> to the docker daemon -> containerd .
  containerd ->  crud operations and apis and more over grpc
 
  grpc, it's a protocol that is used by clients and servers to communicate to the registry.
  
  >containerd is not the one who is creating containers  
  >runc is doing that 
  >
  > the docker image that you provide and 
  > it will tell containerd will take that and says
  > create a container out of it 
  > so runc will talk to operating systems and kernels and everything 
  > pull all the resources and create the container out of it 
  >   
  -> container as you can see it's separate from the daemon now 
  these are entities. it will be make much more sense when we do K8's. 

**BENEFITS**: PREVIOUSLY, what used to happen that 
daemon was the one that had all the rules and logics and everything for containers so 
once the daemon is stopped, all the containers that have that are running  they will also be stopped. 
If so,
what if you want to update your daemon?
what to maintain your daemon?
should it really impact the running containers?

that's where comes into picture like containerd and this shim thing 
==-> once the container is created, runc will be removed. runc's role is only starting container and stop just deleting starting container so once the container is started runc will not be there anymore==  

so need some sort of a way to sort of like manage these containers and talk to containerd related to it? that's where shim comes in this

shim - when runc goes out of scope shim basically takes over. these are known as daemon less containers means when the daemon is down containers will still be running

Why Daemon then? -  it manages some images and networking part and all these things as well so the apis for example with the docker client
has some functionalities . 

daemon = dockerd in the linux 
dockerd and you have 
containerd which is in dockerd,  you have the 
shim which is docker containerd and you have 
runc which is docker runc in linux  

so these are just the names of the binaries. these are the binary files that are in the linux system 
##### Outro
all good!